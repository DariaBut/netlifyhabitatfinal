{"version":3,"file":"buildArrayOfPaths.js","sourceRoot":"","sources":["../../src/buildArrayOfPaths.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAAsB,iBAAiB,CAAC,IAAS,EAAE,MAAc;;QAO7D,SAAe,kBAAkB,CAAC,IAAS,EAAE,OAAe;;;;;;4BACxD,MAAM,CAAC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,CAAC;4BAEnC,IAAI,IAAI,CAAC,MAAM,EAAE;gCACb,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;6BACvB;4BAEK,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;4BAC/B,IAAI,CAAC,QAAQ,EAAE;gCACX,sBAAO;6BACV;;uCAEqB,QAAQ;;;;;;;4BAC1B,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;gCACrC,wBAAS;6BACZ;4BAEK,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAI,OAAO,SAAI,SAAW,CAAC,CAAC,CAAC,KAAG,SAAW,CAAC;;;;4BAGlE,qBAAM,kBAAkB,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,CAAC,EAAA;;4BAAvD,SAAuD,CAAC;;;;4BAExD,MAAM,CAAC,KAAK,CAAC,mCAAiC,QAAQ,MAAG,CAAC,CAAC;4BAE3D,MAAM,IAAE,CAAC;;;;;;;;SAGpB;;;;;oBAjCK,KAAK,GAAa,EAAE,CAAC;oBAE3B,qBAAM,kBAAkB,CAAC,IAAI,EAAE,EAAE,CAAC,EAAA;;oBAAlC,SAAkC,CAAC;oBAEnC,sBAAO,KAAK,EAAC;;;;CA8BhB;AAnCD,8CAmCC","sourcesContent":["import { Logger } from '@uniformdev/common';\r\n\r\nexport async function buildArrayOfPaths(item: any, logger: Logger): Promise<string[]> {\r\n    const paths: string[] = [];\r\n\r\n    await updateArrayOfPaths(item, '');\r\n\r\n    return paths;\r\n\r\n    async function updateArrayOfPaths(item: any, itemUrl: string): Promise<void> {\r\n        logger.info('Queuing: ' + itemUrl);\r\n\r\n        if (item.isPage) {\r\n            paths.push(itemUrl);\r\n        }\r\n\r\n        const children = item.children;\r\n        if (!children) {\r\n            return;\r\n        }\r\n\r\n        for (let childName in children) {\r\n            if (!children.hasOwnProperty(childName)) {\r\n                continue;\r\n            }\r\n\r\n            const childUrl = itemUrl ? `${itemUrl}/${childName}` : `${childName}`;\r\n\r\n            try {\r\n                await updateArrayOfPaths(children[childName], childUrl);\r\n            } catch (ex) {\r\n                logger.error(`Failed to cache site map item ${childUrl}.`);\r\n\r\n                throw ex;\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}