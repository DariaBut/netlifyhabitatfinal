{"version":3,"file":"getApiUrlWithToken.js","sourceRoot":"","sources":["../../../src/util/getApiUrlWithToken.ts"],"names":[],"mappings":";;;AAEA,SAAgB,kBAAkB,CAAC,MAAqB,EAAE,YAAoB,EAAE,eAAwB;IACpG,IAAM,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC;IAEtC,IAAI,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC;IAChE,IAAI,YAAY,EAAE;QACd,YAAY,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;QAC1C,GAAG,GAAG,IAAI,GAAG,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,GAAG,YAAY,EAAE,GAAG,CAAC,CAAC;KACxF;IAED,IAAI,MAAM,CAAC,uBAAuB,EAAE;QAChC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;KACnD;IAED,IAAI,eAAe,EAAE;QACjB,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;KAC1D;IACD,OAAO,GAAG,CAAC,IAAI,CAAC;AACpB,CAAC;AAjBD,gDAiBC","sourcesContent":["import { UniformConfig } from '..';\r\n\r\nexport function getApiUrlWithToken(config: UniformConfig, relativePath: string, uniformApiToken?: string): string {\r\n    const apiUrl = config.UNIFORM_API_URL;\r\n\r\n    let uri = new URL(apiUrl.endsWith('/') ? apiUrl : apiUrl + '/');\r\n    if (relativePath) {\r\n        relativePath = relativePath.toLowerCase();\r\n        uri = new URL(relativePath.startsWith('.') ? relativePath : '.' + relativePath, uri);\r\n    }\r\n\r\n    if (config.UNIFORM_OPTIONS_PREVIEW) {\r\n        uri.searchParams.set('uniform_preview', 'true');\r\n    }\r\n\r\n    if (uniformApiToken) {\r\n        uri.searchParams.set('uniform_token', uniformApiToken);\r\n    }\r\n    return uri.href;\r\n}\r\n"]}