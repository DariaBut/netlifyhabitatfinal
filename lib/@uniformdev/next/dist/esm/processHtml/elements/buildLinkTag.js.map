{"version":3,"file":"buildLinkTag.js","sourceRoot":"","sources":["../../../../src/processHtml/elements/buildLinkTag.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAI1B,sBAAsB;AACtB,MAAM,UAAU,YAAY,CAAC,OAAe;IACxC,OAAO;QACH,eAAe,EAAE,KAAK;QAEtB,iBAAiB,EAAE,UAAU,IAAI;YAC7B,OAAO,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;QAChC,CAAC;QAED,WAAW,EAAE,UAAU,IAAI,EAAE,SAAS;YAClC,IAAM,SAAS,gBAAQ,IAAI,CAAC,OAAO,CAAE,CAAC;YAChC,IAAA,GAAG,GAAW,SAAS,IAApB,EAAE,IAAI,GAAK,SAAS,KAAd,CAAe;YAC9B,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,YAAY,EAAE;gBAC1D,GAAG,GAAG,YAAY,CAAC;aACtB;YACD,IAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YAEzF,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;gBACpC,IAAI,IAAI,EAAE;oBACN,OAAO,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;iBACjD;qBAAM;oBACH,IAAI,CAAC,SAAS,EAAE;wBACZ,OAAO,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;qBACzD;oBACD,IAAM,cAAc,gBAAQ,SAAS,CAAE,CAAC;oBACxC,cAAc,CAAC,uBAAuB,GAAG;wBACrC,MAAM,EAAE,SAAS;qBACpB,CAAC;oBACF,OAAO,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;iBACtD;aACJ;YACD,OAAO,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QAC1D,CAAC;KACJ,CAAC;AACN,CAAC","sourcesContent":["import React from 'react';\r\nimport { Logger } from '@uniformdev/common';\r\nimport { HtmlProcessingInstruction } from '../HtmlProcessingInstruction';\r\n\r\n// normalize link tags\r\nexport function buildLinkTag(_logger: Logger): HtmlProcessingInstruction {\r\n    return {\r\n        replaceChildren: false,\r\n\r\n        shouldProcessNode: function (node) {\r\n            return node.name === 'link';\r\n        },\r\n\r\n        processNode: function (node, _children) {\r\n            const linkProps = { ...node.attribs };\r\n            let { rel, href } = linkProps;\r\n            if (href && href.indexOf('.css') > 0 && rel !== 'stylesheet') {\r\n                rel = 'stylesheet';\r\n            }\r\n            const innerData = node.children && node.children.length > 0 ? node.children[0].data : '';\r\n\r\n            if (href || node.children.length === 1) {\r\n                if (href) {\r\n                    return React.createElement('link', linkProps);\r\n                } else {\r\n                    if (!innerData) {\r\n                        return React.createElement(React.Fragment, undefined);\r\n                    }\r\n                    const innerLinkProps = { ...linkProps };\r\n                    innerLinkProps.dangerouslySetInnerHTML = {\r\n                        __html: innerData,\r\n                    };\r\n                    return React.createElement('link', innerLinkProps);\r\n                }\r\n            }\r\n            return React.createElement(React.Fragment, linkProps);\r\n        },\r\n    };\r\n}\r\n"]}