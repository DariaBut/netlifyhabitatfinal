{"version":3,"file":"getPropsFromRenderingHostRequestStep.js","sourceRoot":"","sources":["../../../../src/pagePropsPipeline/steps/getPropsFromRenderingHostRequestStep.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAO,EAAE,eAAe,EAAE,MAAM,6BAA6B,CAAC;AAE9D,wCAAwC;AACxC,+EAA+E;AAC/E,kDAAkD;AAClD,wGAAwG;AACxG,2DAA2D;AAC3D,MAAM,CAAC,IAAM,oCAAoC,GAA0B;IACvE,IAAI,EAAE,wBAAwB;IAC9B,GAAG,EAAE,UAAO,OAAO;;;YACP,WAAW,GAAY,OAAO,YAAnB,EAAE,KAAK,GAAK,OAAO,MAAZ,CAAa;YACvC,IAAI,CAAC,eAAe,EAAE,IAAI,WAAW,IAAI,WAAW,CAAC,OAAO,IAAI,WAAW,CAAC,KAAK,EAAE;gBAC/E,qDAAqD;gBACrD,8BAA8B;gBAC9B,KAAK,CAAC,QAAQ,GAAG,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC;gBAC9C,KAAK,CAAC,UAAU,GAAG,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC;gBAClD,KAAK,CAAC,UAAU,GAAG,WAAW,CAAC,KAAK,CAAC;gBAErC,4CACO,OAAO,KACV,KAAK,OAAA,KACP;aACL;YACD,sBAAO,OAAO,EAAC;;SAClB;CACJ,CAAC","sourcesContent":["import { PagePropsPipelineStep } from '../../interfaces';\r\nimport { isWindowDefined } from '../../utils/isWindowDefined';\r\n\r\n// ========== RENDERING HOST ===========\r\n// For JSS Integrated Mode the app uses JSS rendering host for rendering, which\r\n// will set the `isJssRenderingHostRequest` value.\r\n// Note: we use `typeof window` condition here so that Next will remove this code from the client build.\r\n// Otherwise, webpack will fail on the `require` statement.\r\nexport const getPropsFromRenderingHostRequestStep: PagePropsPipelineStep = {\r\n    name: 'rendering-host-request',\r\n    run: async (context) => {\r\n        const { previewData, props } = context;\r\n        if (!isWindowDefined() && previewData && previewData.viewBag && previewData.route) {\r\n            // If we have preview data coming from the jss-render\r\n            // then we'll use it fsr props\r\n            props.language = previewData.viewBag.language;\r\n            props.dictionary = previewData.viewBag.dictionary;\r\n            props.layoutData = previewData.route;\r\n\r\n            return {\r\n                ...context,\r\n                props,\r\n            };\r\n        }\r\n        return context;\r\n    },\r\n};\r\n"]}