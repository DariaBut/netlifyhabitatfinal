{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/pagePropsPipeline/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,4CAA8C;AAC9C,uCAA+C;AAC/C,yCAAiD;AAEjD,uCAA+C;AAAtC,6GAAA,iBAAiB,OAAA;AAE1B,SAAgB,YAAY,CAAC,OAAgC;IACnD,IAAA,KAAyD,0BAAa,CAAC,OAAO,CAAC,WAAW,EAAE;QAC9F,OAAA,OAAO,OAAO,CAAC,GAAG,CAAC,kBAAkB,KAAK,UAAU;YAChD,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE;YAClC,CAAC,CAAC,oBAAa,EAAE,CAAC,eAAe;IAFrC,CAEqC,CACxC,EAJO,aAAa,mBAAA,EAAE,gBAAgB,sBAAA,EAAE,iBAAiB,uBAIzD,CAAC;IAEF,IAAM,OAAO,uBACT,KAAK,EAAE,EAAE,IACN,OAAO,KACV,WAAW,aACP,aAAa,EAAE,aAAa,EAC5B,IAAI,EAAE,gBAAgB,IACnB,iBAAiB,IAE3B,CAAC;IAEF,OAAO,4BAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,OAAO,IAAK,OAAA,OAAO,CAAC,KAAK,EAAb,CAAa,CAAC,CAAC;AAC3E,CAAC;AAlBD,oCAkBC","sourcesContent":["import { PagePropsFactoryOptions, PagePropsPipelineContext } from '../interfaces';\r\nimport { resolveParams } from '../routeUtils';\r\nimport { pagePropsPipeline } from './pipeline';\r\nimport { getNextConfig } from '@uniformdev/next';\r\n\r\nexport { pagePropsPipeline } from './pipeline';\r\n\r\nexport function getPageProps(options: PagePropsFactoryOptions) {\r\n    const { resolvedRoute, resolvedLanguage, queryStringParams } = resolveParams(options.routeParams, () =>\r\n        typeof options.env.getCurrentLanguage === 'function'\r\n            ? options.env.getCurrentLanguage()\r\n            : getNextConfig().defaultLanguage\r\n    );\r\n\r\n    const context: PagePropsPipelineContext = {\r\n        props: {},\r\n        ...options,\r\n        routeParams: {\r\n            sitecoreRoute: resolvedRoute,\r\n            lang: resolvedLanguage,\r\n            ...queryStringParams,\r\n        },\r\n    };\r\n\r\n    return pagePropsPipeline.run(context).then((context) => context.props);\r\n}\r\n"]}